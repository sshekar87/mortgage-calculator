<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mortgage Calculator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="calculator-container">
        <h1>Mortgage Calculator</h1>
        
        <!-- RESULTS SECTION - MOVED TO TOP -->
        <div class="results-section" id="results-section">
            <div class="calculation-status" id="calculation-status">
                <div class="loading-spinner" id="loading-spinner" style="display: none;">
                    <div class="spinner"></div>
                    <span>Calculating...</span>
                </div>
            </div>
            
            <div class="results" id="results">
                <div class="main-payment">
                    <h2>Monthly Payment: <span id="monthly-payment">$0</span></h2>
                </div>
                
                <!-- PAYMENT BREAKDOWN BAR -->
                <div class="payment-breakdown" id="payment-breakdown" style="display: none;">
                    <!-- Visual Bar Chart - Numbers Only -->
                    <div class="breakdown-bar">
                        <div class="bar-segment pi-segment" id="pi-bar">
                            <span id="pi-amount-bar">$0</span>
                        </div>
                        <div class="bar-segment tax-segment" id="tax-bar">
                            <span id="tax-amount-bar">$0</span>
                        </div>
                        <div class="bar-segment insurance-segment" id="insurance-bar">
                            <span id="insurance-amount-bar">$0</span>
                        </div>
                    </div>
                    
                    <!-- Labels Below Bar with Color Coding -->
                    <div class="breakdown-labels">
                        <div class="label-item">
                            <div class="label-text pi-label">Principal & Interest</div>
                        </div>
                        <div class="label-item">
                            <div class="label-text tax-label">Property Taxes</div>
                        </div>
                        <div class="label-item">
                            <div class="label-text insurance-label">Home Insurance</div>
                        </div>
                    </div>
                </div>
                
                <div class="secondary-info">
                    <span class="interest-label">Total Interest:</span>
                    <span class="interest-amount" id="total-interest">$0</span>
                </div>
            </div>
        </div>
        
        <!-- INPUT SECTION -->
        <div class="input-section">
            <h3>Loan Details</h3>
            
            <div class="input-group">
                <label for="home-price">Home Price ($):</label>
                <input type="number" id="home-price" value="400000">
            </div>
            
            <div class="input-group">
                <label for="down-payment-percent">Down Payment (%):</label>
                <input type="number" id="down-payment-percent" step="0.5" value="15" min="0" max="100">
            </div>
            
            <div class="input-group">
                <label for="down-payment-amount">Down Payment ($):</label>
                <input type="number" id="down-payment-amount" value="60000" readonly style="background-color: #f0f0f0;">
            </div>
            
            <div class="input-group">
                <label for="loan-amount">Loan Amount ($):</label>
                <input type="number" id="loan-amount" value="340000" readonly style="background-color: #f0f0f0;">
            </div>
            
            <div class="input-group">
                <label for="interest-rate">Interest Rate (%):</label>
                <input type="number" id="interest-rate" step="0.125" value="7.0">
            </div>
            
            <div class="input-group">
                <label for="loan-term">Loan Term (years):</label>
                <input type="number" id="loan-term" value="30">
            </div>
            
            <!-- NEW: Property costs section -->
            <h3>Property Costs</h3>
            
            <div class="input-group">
                <label for="property-tax-rate">Property Tax Rate (% per year):</label>
                <input type="number" id="property-tax-rate" step="0.01" value="1.2" min="0" max="5">
            </div>
            
            <div class="input-group">
                <label for="home-insurance">Home Insurance ($ per year):</label>
                <input type="number" id="home-insurance" value="1200" min="0">
            </div>
            
            <div class="input-group">
                <button id="fetch-rates-btn" type="button">Get Current Rates</button>
                <div id="rate-options" style="display: none;">
                    <!-- Rate options will appear here -->
                </div>
            </div>
        </div>
        
        <!-- LEAD CAPTURE (existing) -->
        <div class="lead-capture-section" id="lead-capture" style="display: none;">
            <!-- Your existing lead capture HTML -->
        </div>
        
        <!-- SAVED CALCULATIONS with expand indicator -->
        <div class="save-section">
            <div class="save-header">
                <button id="save-calculation-btn" type="button">Save This Calculation</button>
                <button id="toggle-saved-btn" class="toggle-saved-btn" style="display: none;">
                    <span class="toggle-text">Show Saved</span>
                    <span class="toggle-icon">â–¼</span>
                </button>
            </div>
            <div id="saved-calculations" style="display: none;">
                <h3>Saved Calculations</h3>
                <div id="saved-list"></div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>